import { CategoryData } from '@/types/comm';
import React, { useEffect, useState } from 'react';
import { connect } from 'react-redux';
import { Dispatch, bindActionCreators } from 'redux';
import * as BlogActions from '@/redux/actionCreator';
const WebSite = (props: any) => {
  // 访问量
  const [viewCount, setViewCount] = useState();
  // 运行天数
  const [days, setDays] = useState(0);
  // 网站访问量
  const [visitNumber, setVisitNumber] = useState()
  // 网站访问量
  useEffect(() => {
    props.BlogActions.asyncWebsitVisitNumberAction().then((res: any) => {
      let { data } = res.data
      setVisitNumber(data[0].visitNumber)
    })
  }, [props.BlogActions])
  useEffect(() => {
    let articles = props.data;
    let viewTemp = articles.map((item: CategoryData) => item.views);

    let init = 0;
    let viewCount = viewTemp.reduce((prev: any, curr: any) => {
      return prev + curr;
    }, init);
    setViewCount(viewCount);
  }, [props.data]);
  useEffect(() => {
    countDown('2023/03/22 00:00:00');
  }, []);
  function countDown(start: any) {
    // 获取当前时间
    let endDate = new Date().getTime();
    let starDate = new Date(start).valueOf();
    let intervalTime = endDate - starDate;
    // 计算天
    let days = Math.floor(intervalTime / 24 / 60 / 60 / 1000);
    setDays(days);
  }

  return (
    <div
      className="flex flex-col  justify-around bg-base-100 py-2 pr-7 pl-5 h-32 text-xl mb-3 mx-auto rounded-3xl transition duration-500 ease-in-out  transform hover:-translate-y-1 hover:scale-105"
      style={{ userSelect: 'none' }}
    >
      <div className="flex justify-between">
        <p className="flex">
          <svg className="icon w-7 h-7 pr-2" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10128"><path d="M870.4 0H153.6C69.12 0 0 69.12 0 153.6v486.4c0 84.48 69.12 153.6 153.6 153.6h716.8c84.48 0 153.6-69.12 153.6-153.6V153.6c0-84.48-69.12-153.6-153.6-153.6z m102.4 640c0 56.32-46.08 102.4-102.4 102.4H153.6c-56.32 0-102.4-46.08-102.4-102.4V153.6c0-56.32 46.08-102.4 102.4-102.4h716.8c56.32 0 102.4 46.08 102.4 102.4v486.4zM793.6 972.8H230.4c-14.08 0-25.6 11.52-25.6 25.6s11.52 25.6 25.6 25.6h563.2c14.08 0 25.6-11.52 25.6-25.6s-11.52-25.6-25.6-25.6zM633.6 908.8c14.08 0 25.6-11.52 25.6-25.6s-11.52-25.6-25.6-25.6h-243.2c-14.08 0-25.6 11.52-25.6 25.6s11.52 25.6 25.6 25.6h243.2z" fill='var(--bgcolor-social-default)' p-id="10129"></path><path d="M640 524.8c-14.08 0-25.6 11.52-25.6 25.6v25.6c0 21.76-16.64 38.4-38.4 38.4H358.4c-21.76 0-38.4-16.64-38.4-38.4V217.6c0-21.76 16.64-38.4 38.4-38.4h217.6c21.76 0 38.4 16.64 38.4 38.4v25.6c0 14.08 11.52 25.6 25.6 25.6s25.6-11.52 25.6-25.6v-25.6c0-49.92-39.68-89.6-89.6-89.6H358.4c-49.92 0-89.6 39.68-89.6 89.6v358.4c0 49.92 39.68 89.6 89.6 89.6h217.6c49.92 0 89.6-39.68 89.6-89.6v-25.6c0-14.08-11.52-25.6-25.6-25.6z" fill='var(--bgcolor-social-default)' p-id="10130"></path><path d="M729.6 371.2H561.92l38.4-38.4c10.24-10.24 10.24-25.6 0-35.84-10.24-10.24-25.6-10.24-35.84 0l-72.96 72.96c-15.36 15.36-15.36 38.4 0 53.76l72.96 72.96c5.12 5.12 11.52 7.68 17.92 7.68s12.8-2.56 17.92-7.68c10.24-10.24 10.24-25.6 0-35.84l-38.4-38.4H729.6c14.08 0 25.6-11.52 25.6-25.6s-11.52-25.6-25.6-25.6z" fill='var(--bgcolor-social-default)' p-id="10131"></path></svg>
          <span>网站访问量</span>
        </p>
        <p><span>{visitNumber}</span></p>
      </div>
      <div className="flex justify-between">
        <p className="flex">
          <svg className="icon w-7 h-7 pr-2" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16206"><path d="M911.207424 454.454272c-20.355072-24.296448-47.50848-43.76576-78.37184-54.076416-6.336512-73.380864-38.610944-138.802176-87.697408-188.510208-54.929408-54.518784-130.675712-88.435712-214.940672-88.435712-61.406208 0-118.780928 18.20672-166.938624 50.153472-43.882496 28.6464-79.561728 68.061184-103.43936 115.127296-52.442112 7.897088-98.615296 33.31072-133.548032 69.410816-38.841344 41.812992-62.711808 97.00352-62.711808 158.516224 0 63.023104 26.283008 120.61184 67.529728 162.195456 41.8048 42.272768 99.17952 67.60448 162.760704 67.60448l22.785024 0 0 61.973504c0 11.655168 9.515008 20.371456 20.907008 20.371456l342.06208 0c11.588608 0 20.358144-8.716288 20.358144-20.371456l0-61.973504 76.729344 0c48.626688-0.377856 92.261376-20.077568 124.3392-52.02432 32.3072-32.192512 52.006912-76.632064 52.006912-125.519872C953.0368 525.14304 937.50784 485.28384 911.207424 454.454272L911.207424 454.454272zM658.885632 787.871744 658.885632 787.871744 357.987328 787.871744 357.987328 561.456128l300.898304 0L658.885632 787.871744 658.885632 787.871744zM852.977664 646.198272 852.977664 646.198272c-19.699712 19.48672-46.621696 31.291392-76.745728 31.963136l-76.269568 0L699.962368 540.919808c0-11.196416-8.768512-20.816896-20.358144-20.816896L337.54112 520.102912c-11.392 0-20.907008 9.621504-20.907008 20.816896l0 137.240576-22.785024 0c-44.628992 0-85.275648-18.354176-114.372608-47.524864l-0.2304 0c-29.213696-29.321216-47.181824-69.556224-47.181824-113.9968 0-43.61728 16.539648-82.574336 44.250112-111.220736 26.923008-28.730368 65.124352-47.970304 106.814464-50.59584 12.936192 0 25.085952-8.27392 30.420992-20.767744 18.386944-42.697728 49.258496-78.7968 87.155712-103.99744 36.994048-24.066048 81.662976-38.5792 129.491968-38.5792 64.780288 0 124.1088 26.33216 166.382592 68.965376 42.43456 42.48576 69.506048 101.58592 69.506048 166.41536l0 0.212992c0 16.400384 11.1616 31.059968 28.138496 33.916928 25.706496 4.595712 49.01888 17.974272 65.106944 37.00224 15.75936 19.027968 25.380864 43.619328 25.380864 70.903808C884.712448 599.13216 872.906752 625.825792 852.977664 646.198272L852.977664 646.198272 852.977664 646.198272zM741.756928 852.84864 741.756928 852.84864 280.050688 852.84864c-11.465728 0-20.675584 9.242624-20.675584 20.83328 0 11.573248 9.21088 20.373504 20.675584 20.373504l461.70624 0c10.947584 0 20.388864-8.800256 20.388864-20.373504C762.145792 862.092288 752.704512 852.84864 741.756928 852.84864L741.756928 852.84864z" fill='var(--bgcolor-social-default)' p-id="16207"></path></svg>
          <span>文章访问量</span>
        </p>
        <p>
          <span>{viewCount}</span>
        </p>
      </div>
      <div className="flex justify-between">
        <p className="flex">
          <svg className="icon w-7 h-7 pr-2" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9973"><path d="M512 32C246.912 32 32 246.848 32 512s214.912 480 480 480c265.152 0 480-214.848 480-480S777.152 32 512 32zM320.256 143.04c20.864-10.88 42.688-20.16 65.408-27.392-23.616 34.624-43.968 78.656-59.904 129.6-23.808-15.232-37.76-33.472-37.76-53.248 0-17.984 12.224-34.56 32.256-48.96zM227.136 209.344c7.424 37.568 36.864 71.296 82.752 96.512-11.84 53.376-19.2 112.064-21.12 174.144H97.6a414.464 414.464 0 0 1 129.536-270.656z m0 605.312A414.464 414.464 0 0 1 97.6 544h191.104c1.92 62.08 9.344 120.768 21.184 174.144-45.888 25.088-75.328 58.944-82.752 96.512z m93.12 66.304C300.224 866.56 288 849.92 288 832c0-19.776 13.952-38.08 37.76-53.312 15.936 51.008 36.288 94.976 59.904 129.664a411.392 411.392 0 0 1-65.408-27.392z m159.744 38.656c-40.192-21.184-74.816-81.856-97.92-165.568a425.536 425.536 0 0 1 97.92-16.704v182.272z m0-245.824a454.592 454.592 0 0 0-111.68 20.288A966.4 966.4 0 0 1 352.64 544H480v129.792z m0-193.792H352.64a966.4 966.4 0 0 1 15.68-150.08 460.608 460.608 0 0 0 111.68 20.352V480z m0-193.344a432.512 432.512 0 0 1-97.92-16.704c23.104-83.712 57.728-144.32 97.92-165.568v182.272z m316.864-77.312A414.08 414.08 0 0 1 926.336 480h-191.104c-1.92-62.08-9.344-120.768-21.184-174.144 45.952-25.152 75.392-58.944 82.816-96.512z m-93.12-66.304c20.032 14.4 32.256 30.976 32.256 48.96 0 19.776-13.952 38.016-37.76 53.248-15.936-50.944-36.288-94.976-59.968-129.6a409.6 409.6 0 0 1 65.472 27.392zM544 104.384c40.256 21.248 74.88 81.856 97.92 165.568a432.512 432.512 0 0 1-97.92 16.704V104.384z m0 245.888a460.096 460.096 0 0 0 111.68-20.288c8.64 45.888 14.144 96.448 15.68 150.016H544V350.272z m0 193.728h127.36c-1.536 53.568-7.04 104.128-15.68 150.144a454.016 454.016 0 0 0-111.68-20.288V544z m0 375.616v-182.272a425.536 425.536 0 0 1 97.92 16.704c-23.04 83.712-57.664 144.384-97.92 165.568z m159.744-38.656c-20.864 10.88-42.688 20.16-65.408 27.456 23.616-34.688 44.032-78.656 59.968-129.664 23.808 15.232 37.76 33.536 37.76 53.312-0.064 17.856-12.288 34.496-32.32 48.896z m93.12-66.304c-7.424-37.568-36.928-71.36-82.816-96.512a936.96 936.96 0 0 0 21.184-174.144h191.104a414.08 414.08 0 0 1-129.472 270.656z" fill='var(--bgcolor-social-default)' p-id="9974"></path></svg>
          <span>本网站已运行</span>
        </p>
        <p>
          <span>{days}天</span>
        </p>
      </div>
    </div>
  );
};

const mapDispatchToProps = (dispatch: Dispatch) => {
  return {
    BlogActions: bindActionCreators(BlogActions, dispatch),
  };
};
export default connect(null, mapDispatchToProps)(WebSite);
