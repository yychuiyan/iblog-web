import{m as K,n as Q,x as X,a as Y,b as Z,c as ee,o as l,f as te,h as U,y as ne,R as T,z as L,C as D,s as oe,w as se,A as re,p as S,q as C,v as ae,B as ie}from"./index-dd06707b.js";import{t as F}from"./index-6d759982.js";import{a as ce}from"./index-bd2ee7c4.js";const le=t=>{const{componentCls:s}=t;return{[s]:{position:"fixed",zIndex:t.zIndexPopup}}},fe=K("Affix",t=>{const s=Q(t,{zIndexPopup:t.zIndexBase+10});return[le(s)]});function O(t){return t!==window?t.getBoundingClientRect():{top:0,bottom:window.innerHeight}}function I(t,s,n){if(n!==void 0&&s.top>t.top-n)return n+s.top}function z(t,s,n){if(n!==void 0&&s.bottom<t.bottom+n){const e=window.innerHeight-s.bottom;return n+e}}const _=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"];let E=[];function k(t,s){if(!t)return;let n=E.find(e=>e.target===t);n?n.affixList.push(s):(n={target:t,affixList:[s],eventHandlers:{}},E.push(n),_.forEach(e=>{n.eventHandlers[e]=X(t,e,()=>{n.affixList.forEach(o=>{o.lazyUpdatePosition()})})}))}function M(t){const s=E.find(n=>{const e=n.affixList.some(o=>o===t);return e&&(n.affixList=n.affixList.filter(o=>o!==t)),e});s&&s.affixList.length===0&&(E=E.filter(n=>n!==s),_.forEach(n=>{const e=s.eventHandlers[n];e&&e.remove&&e.remove()}))}function ue(){return typeof window<"u"?window:null}var A;(function(t){t[t.None=0]="None",t[t.Prepare=1]="Prepare"})(A||(A={}));let H=function(t){Y(n,t);var s=Z(n);function n(){var e;return ee(this,n),e=s.apply(this,arguments),e.state={status:A.None,lastAffix:!1,prevTarget:null},e.placeholderNodeRef=l.createRef(),e.fixedNodeRef=l.createRef(),e.getOffsetTop=()=>{const{offsetBottom:o,offsetTop:r}=e.props;return o===void 0&&r===void 0?0:r},e.getOffsetBottom=()=>e.props.offsetBottom,e.measure=()=>{const{status:o,lastAffix:r}=e.state,{onChange:f}=e.props,i=e.getTargetFunc();if(o!==A.Prepare||!e.fixedNodeRef.current||!e.placeholderNodeRef.current||!i)return;const m=e.getOffsetTop(),g=e.getOffsetBottom(),p=i();if(!p)return;const u={status:A.None},x=O(p),c=O(e.placeholderNodeRef.current),B=I(c,x,m),b=z(c,x,g);c.top===0&&c.left===0&&c.width===0&&c.height===0||(B!==void 0?(u.affixStyle={position:"fixed",top:B,width:c.width,height:c.height},u.placeholderStyle={width:c.width,height:c.height}):b!==void 0&&(u.affixStyle={position:"fixed",bottom:b,width:c.width,height:c.height},u.placeholderStyle={width:c.width,height:c.height}),u.lastAffix=!!u.affixStyle,f&&r!==u.lastAffix&&f(u.lastAffix),e.setState(u))},e.prepareMeasure=()=>{e.setState({status:A.Prepare,affixStyle:void 0,placeholderStyle:void 0})},e.updatePosition=F(()=>{e.prepareMeasure()}),e.lazyUpdatePosition=F(()=>{const o=e.getTargetFunc(),{affixStyle:r}=e.state;if(o&&r){const f=e.getOffsetTop(),i=e.getOffsetBottom(),m=o();if(m&&e.placeholderNodeRef.current){const g=O(m),p=O(e.placeholderNodeRef.current),u=I(p,g,f),x=z(p,g,i);if(u!==void 0&&r.top===u||x!==void 0&&r.bottom===x)return}}e.prepareMeasure()}),e}return te(n,[{key:"getTargetFunc",value:function(){const{getTargetContainer:o}=this.context,{target:r}=this.props;return r!==void 0?r:o??ue}},{key:"componentDidMount",value:function(){const o=this.getTargetFunc();o&&(this.timer=setTimeout(()=>{k(o(),this),this.updatePosition()}))}},{key:"componentDidUpdate",value:function(o){const{prevTarget:r}=this.state,f=this.getTargetFunc(),i=(f==null?void 0:f())||null;r!==i&&(M(this),i&&(k(i,this),this.updatePosition()),this.setState({prevTarget:i})),(o.offsetTop!==this.props.offsetTop||o.offsetBottom!==this.props.offsetBottom)&&this.updatePosition(),this.measure()}},{key:"componentWillUnmount",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),M(this),this.updatePosition.cancel(),this.lazyUpdatePosition.cancel()}},{key:"render",value:function(){const{affixStyle:o,placeholderStyle:r}=this.state,{affixPrefixCls:f,rootClassName:i,children:m}=this.props,g=U(o&&i,{[f]:!!o});let p=ne(this.props,["prefixCls","offsetTop","offsetBottom","target","onChange","affixPrefixCls","rootClassName"]);return T.createElement(L,{onResize:this.updatePosition},T.createElement("div",Object.assign({},p,{ref:this.placeholderNodeRef}),o&&T.createElement("div",{style:r,"aria-hidden":"true"}),T.createElement("div",{className:g,ref:this.fixedNodeRef,style:o},T.createElement(L,{onResize:this.updatePosition},m))))}}]),n}(T.Component);H.contextType=D;const de=l.forwardRef((t,s)=>{const{prefixCls:n,rootClassName:e}=t,{getPrefixCls:o}=l.useContext(D),r=o("affix",n),[f,i]=fe(r),m=Object.assign(Object.assign({},t),{affixPrefixCls:r,rootClassName:U(e,i)});return f(T.createElement(H,Object.assign({},m,{ref:s})))}),Ce=de,he="/assets/osun-fb993d36.webp",pe=t=>{const[s,n]=l.useState(),[e,o]=l.useState(),[r,f]=l.useState(),[i,m]=l.useState(!1),g=re();l.useState("");const[p,u]=l.useState([]),[x,c]=l.useState(0),[B,b]=l.useState("");l.useEffect(()=>{let N=t.data.length;n(N)},[t]),l.useEffect(()=>{let v=t.data.map(w=>({categories:w.categories,_id:w._id})),a={};for(let w=0;w<v.length;w++){let j=v[w].categories;a[j]=a[j]+1||1}let d=[],y=Object.keys(a),R=Object.values(a),P=1;d=y.map((w,j)=>({count:R[j],name:w,id:P++}));let V=d.length;o(V)},[t.data]),l.useEffect(()=>{let v=t.data.map(h=>h.tags),a=[];for(let h=0;h<v.length;h++)a.push(...v[h]);let d=[];for(let h=0;h<a.length;h++)d.indexOf(a[h])===-1&&d.push(a[h]);let y=0,P=d.map(h=>({name:h,id:y++})).length;f(P)},[t.data]),l.useEffect(()=>{t.BlogActions.asyncApothegmListAction().then(N=>{let{data:v}=N.data,a=v.filter(d=>d.checked===!0);a.sort(()=>Math.random()-.5),u(a)})},[t.BlogActions]),l.useEffect(()=>{if(p.length>0){const v=p[x].content;let a="",d=0,y=!1;const R=setInterval(()=>{y||(a+=v[d],b(a),d++,d>=v.length&&(clearInterval(R),setTimeout(()=>{y=!0;const P=setInterval(()=>{a=a.slice(0,-1),b(a),a.length===0&&(clearInterval(P),y=!1,x+1<p.length?c(x+1):c(0))},150)},5e3)))},150);return()=>clearInterval(R)}},[p,x]);const $=()=>{g.replace("/timeline")},J=()=>{g.replace("/category")},W=()=>{g.replace("/tags")},G=()=>{m(!i)},q=()=>{m(i)};return S("div",{className:"flex flex-col bg-base-100 rounded-2xl items-center mb-5 rounded-3xltransition duration-500 ease-in-out  transform  hover:scale-105 lg:hidden",style:{userSelect:"none"},children:[S("div",{className:"flex flex-col items-center justify-center",children:[C("img",{src:`${i?he:ce}`,alt:"",className:`image-container w-24 h-24 mt-3 rounded-full ${i?"rotate":""}`,onMouseEnter:G,onMouseLeave:q}),C("p",{className:"flex items-center justify-center w-64 h-5   pl-2 mt-3 overflow-clip",children:C("span",{className:"",children:B})})]}),S("div",{className:"flex justify-around w-64 h-20 pl-1 pt-2  rounded-xl overflow-clip",children:[S("p",{className:"flex flex-col items-center justify-center w-14 h-14 rounded-2xl cursor-pointer text-[var(--color-icon-default)] hover:bg-[var(--user-content-color)] hover:text-[var(--color-icon-default)] transform duration-300 ease-in",onClick:$,children:[C("span",{children:"文章"}),C("span",{className:"text-sm",children:s})]}),S("p",{className:"flex flex-col items-center justify-center w-14 h-14 rounded-2xl cursor-pointer text-[var(--color-icon-default)] hover:bg-[var(--user-content-color)] hover:text-[var(--color-icon-default)] transform duration-300 ease-in",onClick:J,children:[C("span",{children:"分类"}),C("span",{className:"text-sm",children:e})]}),S("p",{className:"flex flex-col items-center justify-center w-14 h-14 rounded-2xl cursor-pointer text-[var(--color-icon-default)] hover:bg-[var(--user-content-color)] hover:text-[var(--color-icon-default)] transform duration-300 ease-in",onClick:W,children:[C("span",{children:"标签"}),C("span",{className:"text-sm",children:r})]})]})]})},me=t=>({BlogActions:ae(ie,t)}),we=oe(null,me)(se(pe));export{Ce as A,we as U};
