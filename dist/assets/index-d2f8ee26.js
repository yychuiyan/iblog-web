import{o as pe,R as u,C as he,d as Y,aM as me,aN as J,B as ge,D as ve,F as ye,aO as xe,p as re,s as we,q as Se,t as B,v as A}from"./index-0cdd8813.js";import{t as W}from"./index-ad3e7dd3.js";import{a as Te}from"./index-621798b3.js";const Ce=e=>{const{componentCls:t}=e;return{[t]:{position:"fixed",zIndex:e.zIndexPopup}}},be=e=>({zIndexPopup:e.zIndexBase+10}),Ee=pe("Affix",Ce,be);function H(e){return e!==window?e.getBoundingClientRect():{top:0,bottom:window.innerHeight}}function G(e,t,n){if(n!==void 0&&Math.round(t.top)>Math.round(e.top)-n)return n+t.top}function K(e,t,n){if(n!==void 0&&Math.round(t.bottom)<Math.round(e.bottom)+n){const r=window.innerHeight-t.bottom;return n+r}}const Q=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"];function Ae(){return typeof window<"u"?window:null}const Z=0,ee=1,Ne=u.forwardRef((e,t)=>{var n;const{style:r,offsetTop:o,offsetBottom:c,prefixCls:m,className:i,rootClassName:R,children:l,target:d,onChange:g}=e,{getPrefixCls:x,getTargetContainer:w}=u.useContext(he),S=x("affix",m),[_,L]=u.useState(!1),[f,T]=u.useState(),[C,D]=u.useState(),j=u.useRef(Z),b=u.useRef(null),v=u.useRef(),E=u.useRef(null),k=u.useRef(null),O=u.useRef(null),p=(n=d??w)!==null&&n!==void 0?n:Ae,F=c===void 0&&o===void 0?0:o,se=()=>{if(j.current!==ee||!k.current||!E.current||!p)return;const h=p();if(h){const a={status:Z},s=H(E.current);if(s.top===0&&s.left===0&&s.width===0&&s.height===0)return;const M=H(h),z=G(s,M,F),X=K(s,M,c);z!==void 0?(a.affixStyle={position:"fixed",top:z,width:s.width,height:s.height},a.placeholderStyle={width:s.width,height:s.height}):X!==void 0&&(a.affixStyle={position:"fixed",bottom:X,width:s.width,height:s.height},a.placeholderStyle={width:s.width,height:s.height}),a.lastAffix=!!a.affixStyle,_!==a.lastAffix&&(g==null||g(a.lastAffix)),j.current=a.status,T(a.affixStyle),D(a.placeholderStyle),L(a.lastAffix)}},V=()=>{j.current=ee,se()},P=W(()=>{V()}),U=W(()=>{if(p&&f){const h=p();if(h&&E.current){const a=H(h),s=H(E.current),M=G(s,a,F),z=K(s,a,c);if(M!==void 0&&f.top===M||z!==void 0&&f.bottom===z)return}}V()}),$=()=>{const h=p==null?void 0:p();h&&(Q.forEach(a=>{var s;v.current&&((s=b.current)===null||s===void 0||s.removeEventListener(a,v.current)),h==null||h.addEventListener(a,U)}),b.current=h,v.current=U)},ie=()=>{O.current&&(clearTimeout(O.current),O.current=null);const h=p==null?void 0:p();Q.forEach(a=>{var s;h==null||h.removeEventListener(a,U),v.current&&((s=b.current)===null||s===void 0||s.removeEventListener(a,v.current))}),P.cancel(),U.cancel()};u.useImperativeHandle(t,()=>({updatePosition:P})),u.useEffect(()=>(O.current=setTimeout($),()=>ie()),[]),u.useEffect(()=>{$()},[d,f]),u.useEffect(()=>{P()},[d,o,c]);const[ae,ce,le]=Ee(S),ue=Y(R,ce,S,le),de=Y({[ue]:f});let fe=me(e,["prefixCls","offsetTop","offsetBottom","target","onChange","rootClassName"]);return ae(u.createElement(J,{onResize:P},u.createElement("div",Object.assign({style:r,className:i,ref:E},fe),f&&u.createElement("div",{style:C,"aria-hidden":"true"}),u.createElement("div",{className:de,ref:k,style:f},u.createElement(J,{onResize:P},l)))))}),Ie=Ne,Re="/assets/avatar02-461e8442.webp",_e=async e=>{try{return(await ve.get(e)).data}catch(t){throw console.error("Fetch error:",t),t}},Le=()=>{const{data:e,error:t}=ge("/iblog/apothegm/list",_e);return{apothegmList:e,isApothegmListFetched:!t&&e!==void 0}};var q={};const je=ye(xe);var oe;Object.defineProperty(q,"__esModule",{value:!0});var I=je,N=re,y=function(){return y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},y.apply(this,arguments)};function De(e,t){var n,r;switch(t.type){case"TYPE":return y(y({},e),{speed:t.speed,text:(n=t.payload)===null||n===void 0?void 0:n.substring(0,e.text.length+1)});case"DELAY":return y(y({},e),{speed:t.payload});case"DELETE":return y(y({},e),{speed:t.speed,text:(r=t.payload)===null||r===void 0?void 0:r.substring(0,e.text.length-1)});case"COUNT":return y(y({},e),{count:e.count+1});default:return e}}var te=function(e){var t=e.words,n=t===void 0?["Hello World!","This is","a simple Typewriter"]:t,r=e.loop,o=r===void 0?1:r,c=e.typeSpeed,m=c===void 0?80:c,i=e.deleteSpeed,R=i===void 0?50:i,l=e.delaySpeed,d=l===void 0?1500:l,g=e.onLoopDone,x=e.onType,w=e.onDelete,S=e.onDelay,_=N.useReducer(De,{speed:m,text:"",count:0}),L=_[0],f=L.speed,T=L.text,C=L.count,D=_[1],j=N.useRef(0),b=N.useRef(!1),v=N.useRef(!1),E=N.useRef(!1),k=N.useRef(!1),O=N.useCallback(function(){var p=C%n.length,F=n[p];v.current?(D({type:"DELETE",payload:F,speed:R}),T===""&&(v.current=!1,D({type:"COUNT"}))):(D({type:"TYPE",payload:F,speed:m}),E.current=!0,T===F&&(D({type:"DELAY",payload:d}),E.current=!1,k.current=!0,setTimeout(function(){k.current=!1,v.current=!0},d),o>0&&(j.current+=1,j.current/n.length===o&&(k.current=!1,b.current=!0)))),E.current&&x&&x(j.current),v.current&&w&&w(),k.current&&S&&S()},[C,d,R,o,m,n,T,x,w,S]);return N.useEffect(function(){var p=setTimeout(O,f);return b.current&&clearTimeout(p),function(){return clearTimeout(p)}},[O,f]),N.useEffect(function(){g&&b.current&&g()},[g]),[T,{isType:E.current,isDelay:k.current,isDelete:v.current,isDone:b.current}]},ke="styles-module_blinkingCursor__yugAC",Oe="styles-module_blinking__9VXRT";(function(e,t){t===void 0&&(t={});var n=t.insertAt;if(e&&typeof document<"u"){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",n==="top"&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}})(".styles-module_blinkingCursor__yugAC{color:inherit;font:inherit;left:3px;line-height:inherit;opacity:1;position:relative;top:0}.styles-module_blinking__9VXRT{animation-duration:.8s;animation-iteration-count:infinite;animation-name:styles-module_blink__rqfaf}@keyframes styles-module_blink__rqfaf{0%{opacity:1}to{opacity:0}}");var ne=N.memo(function(e){var t=e.cursorBlinking,n=t===void 0||t,r=e.cursorStyle,o=r===void 0?"|":r,c=e.cursorColor,m=c===void 0?"inherit":c;return I.jsx("span",y({style:{color:m},className:"".concat(ke," ").concat(n?Oe:"")},{children:o}))});q.Cursor=ne,oe=q.Typewriter=function(e){var t=e.words,n=t===void 0?["Hello World!","This is","a simple Typewriter"]:t,r=e.loop,o=r===void 0?1:r,c=e.typeSpeed,m=c===void 0?80:c,i=e.deleteSpeed,R=i===void 0?50:i,l=e.delaySpeed,d=l===void 0?1500:l,g=e.cursor,x=g!==void 0&&g,w=e.cursorStyle,S=w===void 0?"|":w,_=e.cursorColor,L=_===void 0?"inherit":_,f=e.cursorBlinking,T=f===void 0||f,C=e.onLoopDone,D=e.onType,j=e.onDelay,b=e.onDelete,v=te({words:n,loop:o,typeSpeed:m,deleteSpeed:R,delaySpeed:d,onLoopDone:C,onType:D,onDelay:j,onDelete:b})[0];return I.jsxs(I.Fragment,{children:[I.jsx("span",{children:v}),x&&I.jsx(ne,{cursorStyle:S,cursorColor:L,cursorBlinking:T})]})},q.useTypewriter=te;const Fe=e=>{const t=e&&e.map(l=>({categories:l.categories,_id:l._id})),n={};for(let l=0;l<t.length;l++){const d=t[l].categories;n[d]=n[d]+1||1}let r=[];const o=Object.keys(n),c=Object.values(n);let m=1;return r=o.map((l,d)=>({count:c[d],name:l,id:m++})),r.length},Be=e=>{const t=e&&e.map(i=>i.tags),n=[];for(let i=0;i<t.length;i++)n.push(...t[i]);const r=[];for(let i=0;i<n.length;i++)r.indexOf(n[i])===-1&&r.push(n[i]);let o=0;return r.map(i=>({name:i,id:o++})).length},Ue=()=>{const[e,t]=re.useState(!1),n=we(),{articleAllList:r,isArticleAllListFetched:o}=Se(1,1),c=o&&r&&r.data?r.data.data:"",m=c.length,i=Fe(c),R=Be(c),{apothegmList:l,isApothegmListFetched:d}=Le(),g=d&&l&&l.data?l.data.data:"",x=g&&g.filter(C=>C.checked===!0).sort(()=>Math.random()-.5),w=x&&x.map(C=>C.content),S=()=>{n("/timeline")},_=()=>{n("/category")},L=()=>{n("/tags")},f=()=>{t(!e)},T=()=>{t(e)};return B("div",{className:"flex flex-col bg-base-100 rounded-2xl items-center mb-5 rounded-3xltransition duration-500 ease-in-out  transform  hover:scale-105 lg:hidden",style:{userSelect:"none"},children:[B("div",{className:"flex flex-col items-center justify-center",children:[A("img",{src:`${e?Re:Te}`,alt:"",className:`image-container w-24 h-24 mt-3 rounded-full ${e?"rotate":""}`,onMouseEnter:f,onMouseLeave:T}),A("p",{className:"flex items-center justify-center w-64 h-5   pl-2 mt-3 overflow-clip",children:A("span",{className:"",children:A(oe,{cursor:!0,cursorBlinking:!0,delaySpeed:5e3,deleteSpeed:260,loop:0,typeSpeed:260,words:w||[]})})})]}),B("div",{className:"flex justify-around w-64 h-20 pl-1 pt-2  rounded-xl overflow-clip",children:[B("p",{className:"flex flex-col items-center justify-center w-14 h-14 rounded-2xl cursor-pointer text-[var(--color-icon-default)] hover:bg-[var(--user-content-color)] hover:text-[var(--color-icon-default)] transform duration-300 ease-in",onClick:S,children:[A("span",{children:"文章"}),A("span",{className:"text-sm",children:m})]}),B("p",{className:"flex flex-col items-center justify-center w-14 h-14 rounded-2xl cursor-pointer text-[var(--color-icon-default)] hover:bg-[var(--user-content-color)] hover:text-[var(--color-icon-default)] transform duration-300 ease-in",onClick:_,children:[A("span",{children:"分类"}),A("span",{className:"text-sm",children:i})]}),B("p",{className:"flex flex-col items-center justify-center w-14 h-14 rounded-2xl cursor-pointer text-[var(--color-icon-default)] hover:bg-[var(--user-content-color)] hover:text-[var(--color-icon-default)] transform duration-300 ease-in",onClick:L,children:[A("span",{children:"标签"}),A("span",{className:"text-sm",children:R})]})]})]})};export{Ie as A,Ue as U};
