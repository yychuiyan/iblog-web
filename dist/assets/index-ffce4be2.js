import{o as se,R as r,C as ae,d as B,aM as ie,aN as k,p as ce,s as le,q as ue,t as x,v as m}from"./index-995e996d.js";import{t as U}from"./index-88664b05.js";import{a as de}from"./index-3d152132.js";const fe=e=>{const{componentCls:s}=e;return{[s]:{position:"fixed",zIndex:e.zIndexPopup}}},he=e=>({zIndexPopup:e.zIndexBase+10}),me=se("Affix",fe,he);function R(e){return e!==window?e.getBoundingClientRect():{top:0,bottom:window.innerHeight}}function H(e,s,t){if(t!==void 0&&Math.round(s.top)>Math.round(e.top)-t)return t+s.top}function J(e,s,t){if(t!==void 0&&Math.round(s.bottom)<Math.round(e.bottom)+t){const i=window.innerHeight-s.bottom;return t+i}}const V=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"];function pe(){return typeof window<"u"?window:null}const $=0,G=1,ge=r.forwardRef((e,s)=>{var t;const{style:i,offsetTop:h,offsetBottom:d,prefixCls:g,className:a,rootClassName:A,children:l,target:u,onChange:v}=e,{getPrefixCls:T,getTargetContainer:j}=r.useContext(ae),M=T("affix",g),[X,q]=r.useState(!1),[p,D]=r.useState(),[K,Q]=r.useState(),L=r.useRef($),F=r.useRef(null),w=r.useRef(),y=r.useRef(null),O=r.useRef(null),b=r.useRef(null),f=(t=u??j)!==null&&t!==void 0?t:pe,P=d===void 0&&h===void 0?0:h,W=()=>{if(L.current!==G||!O.current||!y.current||!f)return;const c=f();if(c){const o={status:$},n=R(y.current);if(n.top===0&&n.left===0&&n.width===0&&n.height===0)return;const S=R(c),C=H(n,S,P),I=J(n,S,d);C!==void 0?(o.affixStyle={position:"fixed",top:C,width:n.width,height:n.height},o.placeholderStyle={width:n.width,height:n.height}):I!==void 0&&(o.affixStyle={position:"fixed",bottom:I,width:n.width,height:n.height},o.placeholderStyle={width:n.width,height:n.height}),o.lastAffix=!!o.affixStyle,X!==o.lastAffix&&(v==null||v(o.lastAffix)),L.current=o.status,D(o.affixStyle),Q(o.placeholderStyle),q(o.lastAffix)}},_=()=>{L.current=G,W()},N=U(()=>{_()}),E=U(()=>{if(f&&p){const c=f();if(c&&y.current){const o=R(c),n=R(y.current),S=H(n,o,P),C=J(n,o,d);if(S!==void 0&&p.top===S||C!==void 0&&p.bottom===C)return}}_()}),z=()=>{const c=f==null?void 0:f();c&&(V.forEach(o=>{var n;w.current&&((n=F.current)===null||n===void 0||n.removeEventListener(o,w.current)),c==null||c.addEventListener(o,E)}),F.current=c,w.current=E)},Y=()=>{b.current&&(clearTimeout(b.current),b.current=null);const c=f==null?void 0:f();V.forEach(o=>{var n;c==null||c.removeEventListener(o,E),w.current&&((n=F.current)===null||n===void 0||n.removeEventListener(o,w.current))}),N.cancel(),E.cancel()};r.useImperativeHandle(s,()=>({updatePosition:N})),r.useEffect(()=>(b.current=setTimeout(z),()=>Y()),[]),r.useEffect(()=>{z()},[u,p]),r.useEffect(()=>{N()},[u,h,d]);const[Z,ee,te]=me(M),ne=B(A,ee,M,te),oe=B({[ne]:p});let re=ie(e,["prefixCls","offsetTop","offsetBottom","target","onChange","rootClassName"]);return Z(r.createElement(k,{onResize:N},r.createElement("div",Object.assign({style:i,className:a,ref:y},re),p&&r.createElement("div",{style:K,"aria-hidden":"true"}),r.createElement("div",{className:oe,ref:O,style:p},r.createElement(k,{onResize:N},l)))))}),Ce=ge,xe="/assets/avatar02-461e8442.webp",ve=e=>{const s=e&&e.map(l=>({categories:l.categories,_id:l._id})),t={};for(let l=0;l<s.length;l++){const u=s[l].categories;t[u]=t[u]+1||1}let i=[];const h=Object.keys(t),d=Object.values(t);let g=1;return i=h.map((l,u)=>({count:d[u],name:l,id:g++})),i.length},we=e=>{const s=e&&e.map(a=>a.tags),t=[];for(let a=0;a<s.length;a++)t.push(...s[a]);const i=[];for(let a=0;a<t.length;a++)i.indexOf(t[a])===-1&&i.push(t[a]);let h=0;return i.map(a=>({name:a,id:h++})).length},Ae=()=>{const[e,s]=ce.useState(!1),t=le(),{articleAllList:i,isArticleAllListFetched:h}=ue(1,1),d=h&&i&&i.data?i.data.data:"",g=d.length,a=ve(d),A=we(d),l=()=>{t("/timeline")},u=()=>{t("/category")},v=()=>{t("/tags")},T=()=>{s(!e)},j=()=>{s(e)};return x("div",{className:"flex flex-col bg-base-100 rounded-2xl items-center mb-5 rounded-3xltransition duration-500 ease-in-out  transform  hover:scale-105 lg:hidden",style:{userSelect:"none"},children:[x("div",{className:"flex flex-col items-center justify-center",children:[m("img",{src:`${e?xe:de}`,alt:"",className:`image-container w-24 h-24 mt-3 rounded-full ${e?"rotate":""}`,onMouseEnter:T,onMouseLeave:j}),m("p",{className:"flex items-center justify-center w-64 h-5   pl-2 mt-3 overflow-clip",children:m("span",{className:""})})]}),x("div",{className:"flex justify-around w-64 h-20 pl-1 pt-2  rounded-xl overflow-clip",children:[x("p",{className:"flex flex-col items-center justify-center w-14 h-14 rounded-2xl cursor-pointer text-[var(--color-icon-default)] hover:bg-[var(--user-content-color)] hover:text-[var(--color-icon-default)] transform duration-300 ease-in",onClick:l,children:[m("span",{children:"文章"}),m("span",{className:"text-sm",children:g})]}),x("p",{className:"flex flex-col items-center justify-center w-14 h-14 rounded-2xl cursor-pointer text-[var(--color-icon-default)] hover:bg-[var(--user-content-color)] hover:text-[var(--color-icon-default)] transform duration-300 ease-in",onClick:u,children:[m("span",{children:"分类"}),m("span",{className:"text-sm",children:a})]}),x("p",{className:"flex flex-col items-center justify-center w-14 h-14 rounded-2xl cursor-pointer text-[var(--color-icon-default)] hover:bg-[var(--user-content-color)] hover:text-[var(--color-icon-default)] transform duration-300 ease-in",onClick:v,children:[m("span",{children:"标签"}),m("span",{className:"text-sm",children:A})]})]})]})};export{Ce as A,Ae as U};
