import{s as re,w as me,o as i,aF as c,R as de,p as a,q as e,aG as pe,aH as he,aI as L,aJ as v,aK as x,aL as U,aM as D,aN as W,F as G,T as ge,v as ue,u as k,B as fe}from"./index-3da8e1a3.js";import{M as ye}from"./index-f1d0eab0.js";import{d as h}from"./dayjs.min-c78aab16.js";import{r as xe,C as be,e as J,a as we,b as Ce,L as E,M as K,c as Se}from"./emoji-5a4fa73e.js";import{P as Ne}from"./PageDesc-df484bbc.js";import{S as ze}from"./SoundOutlined-d374a9cb.js";const ve=r=>{const[Z,A]=i.useState([]),[s,b]=i.useState({_id:"",pid:"-1"}),[Q,M]=i.useState(0),[w,T]=i.useState(1),[C,R]=i.useState(10),[_,X]=i.useState(1),[ee,Ae]=i.useState("cm"),[S]=c.useForm(),[Y]=c.useForm(),N=i.useRef(null),[u,j]=i.useState(!1);h.extend(xe);const F=de.useRef(),[H,$]=i.useState(""),[B,P]=i.useState("");i.useEffect(()=>{F.current&&window.scroll({top:F.current.offsetTop-80||0,left:0,behavior:"smooth"})},[]),i.useEffect(()=>{r.BlogActions.asyncMessageListAction(w,C,1).then(t=>{let{data:o,totalCount:d,page:p,pageSize:n}=t.data;o.map(m=>{m.messageTime=h(m.messageTime*1e3).format("YYYY-MM-DD HH:mm:ss"),m.children.map(l=>{l.messageTime=h(l.messageTime*1e3).format("YYYY-MM-DD HH:mm:ss")})}),A(o),M(d),T(p),R(n)})},[w,C,r.BlogActions]);const te=t=>{if(t.content===void 0||t.content==="")return k.warning("ç•™è¨€å†…å®¹ä¸èƒ½ä¸ºç©ºğŸ˜¯");r.BlogActions.asyncMessageInsertAction({pid:s.pid,targetReplayId:s._id||"-1",targetReplayContent:"",currentReplayContent:t.content,auditTime:0,auditStatus:"1",avatar:"http://dummyimage.com/100x100",email:t.email,nickName:t.nickname}).then(()=>{setTimeout(()=>{k.success("ç•™è¨€æˆåŠŸ~"),_===1&&Y.resetFields(),_===2&&(b({_id:"",pid:"-1"}),S.resetFields()),r.BlogActions.asyncMessageListAction(w,C,1).then(m=>{let{data:l,totalCount:f,page:y,pageSize:I}=m.data;l.map(g=>{g.messageTime=h(g.messageTime*1e3).format("YYYY-MM-DD HH:mm:ss"),g.children.map(z=>{z.messageTime=h(z.messageTime*1e3).format("YYYY-MM-DD HH:mm:ss")})}),A(l),M(f),T(y),R(I)});let o="haoju.zhang@outlook.com",d=`æ‚¨çš„åšå®¢æ”¶åˆ°æ¥è‡ª${t.nickname}<${t.email}>çš„ç•™è¨€`,n=`<div><br /><p>æ‚¨åœ¨<span style="color: cadetblue; padding: 3px">å¤œé›¨ç‚ŠçƒŸ</span>åšå®¢ä¸Šæ”¶åˆ°æ–°çš„ç•™è¨€</p><hr /><span style="color: cadetblue;">${t.nickname}:</span><p style="width: 98%;min-height: 30px;padding-top: 10px;padding-left: 10px;padding-bottom: 10px;background-color: #f5f5f5;border-radius: 10px;"><span>${t.content}</span></p><p><a href="https://yychuiyan.com/rblog/message"target="_blank"style="text-decoration: none; color: #5c8fef">ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</a></p></div>`.split(`
`).join(`
<br/>
`);r.BlogActions.asyncSendMailAction({email:o,subject:d,html:n})},500)})},q=()=>{},O=t=>{b(t),S.resetFields(),N&&setTimeout(()=>{var o;(o=N==null?void 0:N.current)==null||o.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)},ae=t=>{if(t.content===void 0||t.content==="")return k.warning("å›å¤å†…å®¹ä¸èƒ½ä¸ºç©ºğŸ˜¯");X(2),r.BlogActions.asyncMessageInsertAction({pid:s.pid==="-1"?s._id:s.pid,targetReplayId:s._id||"-1",targetReplayContent:`${t==null?void 0:t.nickname}@${s==null?void 0:s.nickName} ${s==null?void 0:s.currentReplayContent}`,currentReplayContent:t.content,auditTime:0,auditStatus:"1",avatar:"http://dummyimage.com/100x100",email:t.email,nickName:t.nickname}).then(()=>{setTimeout(()=>{k.success("å›å¤æˆåŠŸ~"),_===1&&Y.resetFields(),_===2&&(b({_id:"",pid:"-1"}),S.resetFields()),r.BlogActions.asyncMessageListAction(w,C,1).then(m=>{let{data:l,totalCount:f,page:y,pageSize:I}=m.data;l.map(g=>{g.messageTime=h(g.messageTime*1e3).format("YYYY-MM-DD HH:mm:ss"),g.children.map(z=>{z.messageTime=h(z.messageTime*1e3).format("YYYY-MM-DD HH:mm:ss")})}),A(l),b(l),M(f),T(y),R(I)});let o=s.email,d="æ‚¨åœ¨å¤œé›¨ç‚ŠçƒŸå°ç«™ä¸­çš„ç•™è¨€æ”¶åˆ°äº†å›å¤",n=`<div><br /><p>æ‚¨åœ¨<span style="color: cadetblue; padding: 3px">å¤œé›¨ç‚ŠçƒŸ</span>åšå®¢ä¸­çš„ç•™è¨€ï¼š</p><hr /><p style="width: 98%;min-height: 30px;padding-top: 10px;padding-left: 10px;padding-bottom: 10px;background-color: #f5f5f5;border-radius: 10px;"><span>${s.currentReplayContent}</span></p>æ”¶åˆ°<span style="color: cadetblue; padding-right:2px;">${t.nickname}</span>çš„å›å¤:<p style="width: 98%;min-height: 30px;padding-top: 10px;padding-left: 10px;padding-bottom: 10px;background-color: #f5f5f5;border-radius: 10px;"><span>${t.content}</span></p><p><a href="https://yychuiyan.com/rblog/message"target="_blank"style="text-decoration: none; color: #5c8fef">ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</a></p></div>`.split(`
`).join(`
<br/>
`);r.BlogActions.asyncSendMailAction({email:o,subject:d,html:n})},500)}),V()},V=()=>{b({_id:"",pid:"-1"})},ne=(t,o)=>{r.BlogActions.asyncArticleCommentsAction(t,o,1).then(d=>{let{data:p,totalCount:n,page:m,pageSize:l}=d.data;A(p),M(n),T(m),R(l)})},se=t=>{Y.setFieldsValue({content:H.concat(t)}),$(H.concat(t)),j(!u)},le=t=>{$(t.target.value)},oe=t=>{S.setFieldsValue({content:B.concat(t)}),P(B.concat(t)),j(!u)},ie=t=>{P(t.target.value)},ce=`name: å¤œé›¨ç‚ŠçƒŸ
link: https://yychuiyan.com
avatar: https://op.yychuiyan.com/avatar.webp
desc: ä¸‰é¤çƒŸç«æš–ï¼Œå››å­£çš†å®‰ç„¶ã€‚`;return a("div",{className:"w-1200 mx-auto pb-5 lg:w-full lg:mx-5 sm:w-full",ref:F,children:[e(Ne,{title:"ç•™è¨€æ¿"}),e("div",{className:"w-1000 mx-auto mt-10 lg:w-full sm:w-full",children:a(be,{className:" rounded-2xl bg-base-100",children:[e("div",{style:{textAlign:"center",fontSize:"16px",fontWeight:"bolder",marginBottom:"24px",position:"relative"},className:"lg:w-full sm:w-full",children:e("div",{className:"h-36 px-20 mt-5 font-normal lg:px-0",children:a("div",{className:"flex flex-col items-start w-[100%]  absolute",children:[e("p",{className:"flex absolute text-xl",style:{userSelect:"none"},children:"æœ¬ç«™ä¿¡æ¯:"}),a("div",{className:"flex items-start relative justify-center flex-col w-800 mt-8 bg-base-200  rounded-xl hover:transition hover:duration-500 hover:shadow cursor-pointer lg:w-full",style:{userSelect:"none"},children:[e("p",{className:"absolute right-2 top-2",onClick:()=>{navigator.clipboard.writeText(ce),k.info({content:"å¤åˆ¶æˆåŠŸ!",icon:e(ze,{style:{color:"var(--bgcolor-social-default)"}}),className:"text-[var(--bgcolor-social-default)]"})},children:e(pe,{icon:he,size:"xl"})}),a("p",{className:"pl-2 py-1",children:[e("span",{children:"name: "}),e("span",{children:"å¤œé›¨ç‚ŠçƒŸ"})]}),a("p",{className:"pl-2 pb-1",children:[e("span",{children:"link: "}),e("span",{children:"https://yychuiyan.com"})]}),a("p",{className:"pl-2 pb-1 lg:flex lg:flex-col lg:items-start",children:[e("span",{children:"avatar: "}),e("span",{children:"https://op.yychuiyan.com/avatar.webp"})]}),a("p",{className:"pl-2 pb-1",children:[e("span",{children:"desc: "}),e("span",{children:"ä¸‰é¤çƒŸç«æš–ï¼Œå››å­£çš†å®‰ç„¶ã€‚"})]})]})]})})}),a(c,{name:"basic",form:Y,onFinish:te,onFinishFailed:q,className:"w-800 mx-auto  lg:w-full sm:w-full",children:[a(L,{children:[e(v,{span:12,className:"pr-2 mt-5 lg:mt-8",children:e(c.Item,{label:"",name:"nickname",rules:[{required:!0,message:"è¯·è¾“å…¥ä½ çš„æ˜µç§°"},{whitespace:!0,message:"è¾“å…¥ä¸èƒ½ä¸ºç©º"},{min:2,message:"æ˜µç§°ä¸èƒ½å°äº2ä¸ªå­—ç¬¦"},{max:30,message:"ä¸»é¢˜ä¸èƒ½å¤§äº30ä¸ªå­—ç¬¦"}],children:e(x,{maxLength:30,placeholder:"è¯·è¾“å…¥ä½ çš„æ˜µç§°"})})}),e(v,{span:12,className:"pl-2 mt-5 lg:mt-8",children:e(c.Item,{label:"",name:"email",rules:[{required:!0,message:"è¯·è¾“å…¥é‚®ç®±"},{pattern:/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,message:"é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"}],children:e(x,{maxLength:30,placeholder:"è¯·è¾“å…¥ä½ çš„é‚®ç®±"})})})]}),e(c.Item,{label:"",name:"content",children:e(x.TextArea,{placeholder:"è¯·è¾“å…¥ç•™è¨€å†…å®¹",onChange:le,value:H,autoSize:{minRows:6,maxRows:12}})}),e(U,{overlayStyle:{width:"260px"},placement:"top",open:u,onOpenChange:()=>j(!u),content:J.map(t=>e("span",{className:" inline-block cursor-pointer px-2 text-[20px] hover:bg-blue-400 w-5 h-8 rounded-md",onClick:()=>se(t.emoji),children:t.emoji},t.id)),children:a("div",{className:"-mt-5 mb-1 flex items-center justify-center w-16 h-8 text-center rounded cursor-pointer border-1 border-solid border-base-200",style:{userSelect:"none"},children:[e("span",{children:a("svg",{className:"icon w-6 h-6 pt-1",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2554",children:[e("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:"#333333","p-id":"2555"}),e("path",{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zM288 421a48.01 48.01 0 0 1 96 0 48.01 48.01 0 0 1-96 0z m224 272c-85.5 0-155.6-67.3-160-151.6a8 8 0 0 1 8-8.4h48.1c4.2 0 7.8 3.2 8.1 7.4C420 589.9 461.5 629 512 629s92.1-39.1 95.8-88.6c0.3-4.2 3.9-7.4 8.1-7.4H664a8 8 0 0 1 8 8.4C667.6 625.7 597.5 693 512 693z m176-224a48.01 48.01 0 0 1 0-96 48.01 48.01 0 0 1 0 96z",fill:"#E6E6E6","p-id":"2556"}),e("path",{d:"M288 421a48 48 0 1 0 96 0 48 48 0 1 0-96 0z m376 112h-48.1c-4.2 0-7.8 3.2-8.1 7.4-3.7 49.5-45.3 88.6-95.8 88.6s-92-39.1-95.8-88.6c-0.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 0 0-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 0 0-8-8.4z m-24-112a48 48 0 1 0 96 0 48 48 0 1 0-96 0z",fill:"#333333","p-id":"2557"})]})}),e("span",{className:"text-base text-[var(--bgcolor-navbar-click)]",style:{userSelect:"none"},children:"è¡¨æƒ…"})]})}),e(c.Item,{className:"",children:a(D,{type:"primary",htmlType:"submit",className:"w-800 mx-auto lg:w-full sm:w-full",children:[e(we,{}),"Â æäº¤ç•™è¨€"]})})]}),e(L,{className:"mt:h-4 w-full mx-auto lg:w-full sm:w-full",children:a(v,{span:24,className:"sm:w-full lg:w-full",children:[a("b",{style:{marginBottom:"24px",color:"var(--color-icon-default)",userSelect:"none"},children:["ç•™è¨€å±•ç¤ºÂ ",e(Ce,{})]}),Z.length>0?e(E,{itemLayout:"horizontal",className:"sm:w-full lg:w-full",dataSource:Z,renderItem:(t,o)=>{var d,p;return e(E.Item,{actions:[],children:e(E.Item.Meta,{avatar:e(W,{style:{backgroundColor:"#1890ff",userSelect:"none"},children:(p=(d=t.nickName)==null?void 0:d.slice(0,1))==null?void 0:p.toUpperCase()}),title:e("b",{style:{color:"var(--color-icon-default)",userSelect:"none"},children:t.nickName}),description:a(G,{children:[e("div",{className:"user_content font-normal lg:w-full",children:e("pre",{className:"lg:overflow-auto",dangerouslySetInnerHTML:{__html:t.currentReplayContent.replace(/((http|https):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|])/g,n=>"<a href='"+n+"' target='_blank'>"+n+"</a>")}})}),a("div",{className:"sm:w-full lg:w-full",style:{fontSize:"12px",marginTop:"8px",marginBottom:"16px",alignItems:"center",display:"flex",flexWrap:"wrap",justifyContent:"space-between"},children:[a("span",{className:"user_desc",style:{userSelect:"none"},children:["ç”¨æˆ·Â ",t.nickName,"Â Â å‘è¡¨äºÂ ",t.messageTime]}),e("span",{style:{userSelect:"none"},children:a("a",{style:{fontSize:"12px",marginRight:"12px"},onClick:()=>O(t),children:[e(K,{}),"Â  å›å¤"]})})]}),t.children&&t.children.length?e(G,{children:t.children.map((n,m)=>{var l,f;return e(Se,{className:"bg-base-100",author:e("span",{className:"replay_title",style:{userSelect:"none"},children:n.targetReplayContent.substring(0,40)+"Â·Â·Â·"}),avatar:e(W,{style:{backgroundColor:"#1890ff",userSelect:"none"},children:(f=(l=n.nickName)==null?void 0:l.slice(0,1))==null?void 0:f.toUpperCase()}),content:e("span",{className:"user_content font-normal",children:e("pre",{className:"lg:overflow-auto",dangerouslySetInnerHTML:{__html:n.currentReplayContent.replace(/((http|https):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|])/g,y=>"<a href='"+y+"' target='_blank'>"+y+"</a>")}})}),datetime:e(ge,{title:n.messageTime,children:e("span",{style:{userSelect:"none"},children:h(n.messageTime).fromNow()})}),actions:[a("a",{style:{fontSize:"12px",marginRight:"12px",userSelect:"none"},onClick:()=>O(n),children:[e(K,{}),"Â  å›å¤"]})]},m)})}):null,s._id===t._id||s.pid===t._id?e("div",{style:{marginTop:"12px"},ref:N,children:a(c,{form:S,name:"reply",onFinish:ae,onFinishFailed:q,children:[a(L,{children:[e(v,{span:12,className:"pr-2",children:e(c.Item,{label:"",name:"nickname",rules:[{required:!0,message:"è¯·è¾“å…¥ä½ çš„æ˜µç§°"},{whitespace:!0,message:"è¾“å…¥ä¸èƒ½ä¸ºç©º"},{min:2,message:"æ˜µç§°ä¸èƒ½å°äº2ä¸ªå­—ç¬¦"},{max:30,message:"ä¸»é¢˜ä¸èƒ½å¤§äº30ä¸ªå­—ç¬¦"}],children:e(x,{maxLength:30,placeholder:"è¯·è¾“å…¥ä½ çš„æ˜µç§°"})})}),e(v,{span:12,className:"pl-2",children:e(c.Item,{label:"",name:"email",rules:[{required:!0,message:"è¯·è¾“å…¥é‚®ç®±"},{pattern:/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,message:"é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"}],children:e(x,{maxLength:30,placeholder:"è¯·è¾“å…¥ä½ çš„é‚®ç®±"})})})]}),e(c.Item,{label:"",name:"content",children:e(x.TextArea,{placeholder:"è¯·è¾“å…¥å›å¤å†…å®¹",onChange:ie,value:B,autoSize:{minRows:6,maxRows:12}})}),e(U,{overlayStyle:{width:"260px"},placement:"top",open:u,onOpenChange:()=>j(!u),content:J.map(n=>e("span",{className:" inline-block cursor-pointer px-2 text-[20px] hover:bg-blue-400 w-5 h-8 rounded-md",onClick:()=>oe(n.emoji),children:n.emoji},n.id)),children:a("div",{className:"-mt-5 mb-1 flex items-center justify-center w-16 h-8 text-center rounded cursor-pointer border-1 border-solid border-base-200",style:{userSelect:"none"},children:[e("span",{children:a("svg",{className:"icon w-6 h-6 pt-1",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2554",children:[e("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:"#333333","p-id":"2555"}),e("path",{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zM288 421a48.01 48.01 0 0 1 96 0 48.01 48.01 0 0 1-96 0z m224 272c-85.5 0-155.6-67.3-160-151.6a8 8 0 0 1 8-8.4h48.1c4.2 0 7.8 3.2 8.1 7.4C420 589.9 461.5 629 512 629s92.1-39.1 95.8-88.6c0.3-4.2 3.9-7.4 8.1-7.4H664a8 8 0 0 1 8 8.4C667.6 625.7 597.5 693 512 693z m176-224a48.01 48.01 0 0 1 0-96 48.01 48.01 0 0 1 0 96z",fill:"#E6E6E6","p-id":"2556"}),e("path",{d:"M288 421a48 48 0 1 0 96 0 48 48 0 1 0-96 0z m376 112h-48.1c-4.2 0-7.8 3.2-8.1 7.4-3.7 49.5-45.3 88.6-95.8 88.6s-92-39.1-95.8-88.6c-0.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 0 0-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 0 0-8-8.4z m-24-112a48 48 0 1 0 96 0 48 48 0 1 0-96 0z",fill:"#333333","p-id":"2557"})]})}),e("span",{className:"text-base text-[var(--bgcolor-navbar-click)]",children:"è¡¨æƒ…"})]})}),e(c.Item,{children:a("div",{style:{display:"flex",justifyContent:"flex-end"},children:[e(D,{style:{marginRight:"12px"},onClick:()=>V(),children:"å–æ¶ˆ"}),e(D,{type:"primary",htmlType:"submit",children:"Â å›å¤"})]})}),e(c.Item,{})]})}):null]})})},o)}}):e("div",{className:"flex justify-center",children:"æš‚æ— ç•™è¨€~"}),e(ye,{text:ee,pageSize:C,currentPage:w,total:Q,onChange:ne})]})})]})})]})},ke=r=>({BlogActions:ue(fe,r)}),He=re(null,ke)(me(ve));export{He as default};
