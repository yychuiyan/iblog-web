import{m as K,n as Q,x as X,a as Y,b as Z,c as ee,o as c,f as te,h as U,y as ne,R as T,z as L,C as D,s as oe,w as se,A as re,p as b,q as C,v as ae,B as ie}from"./index-bc8ea833.js";import{t as F}from"./index-2652c498.js";import{a as le}from"./index-c0cc56fe.js";const ce=t=>{const{componentCls:s}=t;return{[s]:{position:"fixed",zIndex:t.zIndexPopup}}},fe=K("Affix",t=>{const s=Q(t,{zIndexPopup:t.zIndexBase+10});return[ce(s)]});function O(t){return t!==window?t.getBoundingClientRect():{top:0,bottom:window.innerHeight}}function I(t,s,n){if(n!==void 0&&s.top>t.top-n)return n+s.top}function z(t,s,n){if(n!==void 0&&s.bottom<t.bottom+n){const e=window.innerHeight-s.bottom;return n+e}}const _=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"];let E=[];function k(t,s){if(!t)return;let n=E.find(e=>e.target===t);n?n.affixList.push(s):(n={target:t,affixList:[s],eventHandlers:{}},E.push(n),_.forEach(e=>{n.eventHandlers[e]=X(t,e,()=>{n.affixList.forEach(o=>{o.lazyUpdatePosition()})})}))}function M(t){const s=E.find(n=>{const e=n.affixList.some(o=>o===t);return e&&(n.affixList=n.affixList.filter(o=>o!==t)),e});s&&s.affixList.length===0&&(E=E.filter(n=>n!==s),_.forEach(n=>{const e=s.eventHandlers[n];e&&e.remove&&e.remove()}))}function ue(){return typeof window<"u"?window:null}var S;(function(t){t[t.None=0]="None",t[t.Prepare=1]="Prepare"})(S||(S={}));let H=function(t){Y(n,t);var s=Z(n);function n(){var e;return ee(this,n),e=s.apply(this,arguments),e.state={status:S.None,lastAffix:!1,prevTarget:null},e.placeholderNodeRef=c.createRef(),e.fixedNodeRef=c.createRef(),e.getOffsetTop=()=>{const{offsetBottom:o,offsetTop:r}=e.props;return o===void 0&&r===void 0?0:r},e.getOffsetBottom=()=>e.props.offsetBottom,e.measure=()=>{const{status:o,lastAffix:r}=e.state,{onChange:f}=e.props,i=e.getTargetFunc();if(o!==S.Prepare||!e.fixedNodeRef.current||!e.placeholderNodeRef.current||!i)return;const g=e.getOffsetTop(),m=e.getOffsetBottom(),p=i();if(!p)return;const u={status:S.None},x=O(p),l=O(e.placeholderNodeRef.current),B=I(l,x,g),A=z(l,x,m);l.top===0&&l.left===0&&l.width===0&&l.height===0||(B!==void 0?(u.affixStyle={position:"fixed",top:B,width:l.width,height:l.height},u.placeholderStyle={width:l.width,height:l.height}):A!==void 0&&(u.affixStyle={position:"fixed",bottom:A,width:l.width,height:l.height},u.placeholderStyle={width:l.width,height:l.height}),u.lastAffix=!!u.affixStyle,f&&r!==u.lastAffix&&f(u.lastAffix),e.setState(u))},e.prepareMeasure=()=>{e.setState({status:S.Prepare,affixStyle:void 0,placeholderStyle:void 0})},e.updatePosition=F(()=>{e.prepareMeasure()}),e.lazyUpdatePosition=F(()=>{const o=e.getTargetFunc(),{affixStyle:r}=e.state;if(o&&r){const f=e.getOffsetTop(),i=e.getOffsetBottom(),g=o();if(g&&e.placeholderNodeRef.current){const m=O(g),p=O(e.placeholderNodeRef.current),u=I(p,m,f),x=z(p,m,i);if(u!==void 0&&r.top===u||x!==void 0&&r.bottom===x)return}}e.prepareMeasure()}),e}return te(n,[{key:"getTargetFunc",value:function(){const{getTargetContainer:o}=this.context,{target:r}=this.props;return r!==void 0?r:o??ue}},{key:"componentDidMount",value:function(){const o=this.getTargetFunc();o&&(this.timer=setTimeout(()=>{k(o(),this),this.updatePosition()}))}},{key:"componentDidUpdate",value:function(o){const{prevTarget:r}=this.state,f=this.getTargetFunc(),i=(f==null?void 0:f())||null;r!==i&&(M(this),i&&(k(i,this),this.updatePosition()),this.setState({prevTarget:i})),(o.offsetTop!==this.props.offsetTop||o.offsetBottom!==this.props.offsetBottom)&&this.updatePosition(),this.measure()}},{key:"componentWillUnmount",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),M(this),this.updatePosition.cancel(),this.lazyUpdatePosition.cancel()}},{key:"render",value:function(){const{affixStyle:o,placeholderStyle:r}=this.state,{affixPrefixCls:f,rootClassName:i,children:g}=this.props,m=U(o&&i,{[f]:!!o});let p=ne(this.props,["prefixCls","offsetTop","offsetBottom","target","onChange","affixPrefixCls","rootClassName"]);return T.createElement(L,{onResize:this.updatePosition},T.createElement("div",Object.assign({},p,{ref:this.placeholderNodeRef}),o&&T.createElement("div",{style:r,"aria-hidden":"true"}),T.createElement("div",{className:m,ref:this.fixedNodeRef,style:o},T.createElement(L,{onResize:this.updatePosition},g))))}}]),n}(T.Component);H.contextType=D;const de=c.forwardRef((t,s)=>{const{prefixCls:n,rootClassName:e}=t,{getPrefixCls:o}=c.useContext(D),r=o("affix",n),[f,i]=fe(r),g=Object.assign(Object.assign({},t),{affixPrefixCls:r,rootClassName:U(e,i)});return f(T.createElement(H,Object.assign({},g,{ref:s})))}),Ce=de,he="/assets/osun-fb993d36.webp",pe=t=>{const[s,n]=c.useState(),[e,o]=c.useState(),[r,f]=c.useState(),[i,g]=c.useState(!1),m=re();c.useState("");const[p,u]=c.useState([]),[x,l]=c.useState(0),[B,A]=c.useState("");c.useEffect(()=>{let N=t.data.length;n(N)},[t]),c.useEffect(()=>{let v=t.data.map(w=>({categories:w.categories,_id:w._id})),a={};for(let w=0;w<v.length;w++){let j=v[w].categories;a[j]=a[j]+1||1}let d=[],y=Object.keys(a),R=Object.values(a),P=1;d=y.map((w,j)=>({count:R[j],name:w,id:P++}));let V=d.length;o(V)},[t.data]),c.useEffect(()=>{let v=t.data.map(h=>h.tags),a=[];for(let h=0;h<v.length;h++)a.push(...v[h]);let d=[];for(let h=0;h<a.length;h++)d.indexOf(a[h])===-1&&d.push(a[h]);let y=0,P=d.map(h=>({name:h,id:y++})).length;f(P)},[t.data]),c.useEffect(()=>{t.BlogActions.asyncApothegmListAction().then(N=>{let{data:v}=N.data,a=v.filter(d=>d.checked===!0);a.sort(()=>Math.random()-.5),u(a)})},[t.BlogActions]),c.useEffect(()=>{if(p.length>0){const v=p[x].content;let a="",d=0,y=!1;const R=setInterval(()=>{y||(a+=v[d],A(a),d++,d>=v.length&&(clearInterval(R),setTimeout(()=>{y=!0;const P=setInterval(()=>{a=a.slice(0,-1),A(a),a.length===0&&(clearInterval(P),y=!1,x+1<p.length?l(x+1):l(0))},150)},5e3)))},150);return()=>clearInterval(R)}},[p,x]);const $=()=>{m.replace("/rblog/timeline")},J=()=>{m.replace("/rblog/category")},W=()=>{m.replace("/rblog/tags")},G=()=>{g(!i)},q=()=>{g(i)};return b("div",{className:"flex flex-col bg-base-100 rounded-2xl items-center mb-5 rounded-3xltransition duration-500 ease-in-out  transform  hover:scale-105 lg:hidden",style:{userSelect:"none"},children:[b("div",{className:"flex flex-col items-center justify-center",children:[C("img",{src:`${i?he:le}`,alt:"",className:`image-container w-24 h-24 mt-3 rounded-full ${i?"rotate":""}`,onMouseEnter:G,onMouseLeave:q}),C("p",{className:"flex items-center justify-center w-64 h-5   pl-2 mt-3 overflow-clip",children:C("span",{className:"",children:B})})]}),b("div",{className:"flex justify-around w-64 h-20 pl-1 pt-2  rounded-xl overflow-clip",children:[b("p",{className:"flex flex-col items-center justify-center w-14 h-14 rounded-2xl cursor-pointer text-[var(--color-icon-default)] hover:bg-[var(--user-content-color)] hover:text-[var(--color-icon-default)] transform duration-300 ease-in",onClick:$,children:[C("span",{children:"文章"}),C("span",{className:"text-sm",children:s})]}),b("p",{className:"flex flex-col items-center justify-center w-14 h-14 rounded-2xl cursor-pointer text-[var(--color-icon-default)] hover:bg-[var(--user-content-color)] hover:text-[var(--color-icon-default)] transform duration-300 ease-in",onClick:J,children:[C("span",{children:"分类"}),C("span",{className:"text-sm",children:e})]}),b("p",{className:"flex flex-col items-center justify-center w-14 h-14 rounded-2xl cursor-pointer text-[var(--color-icon-default)] hover:bg-[var(--user-content-color)] hover:text-[var(--color-icon-default)] transform duration-300 ease-in",onClick:W,children:[C("span",{children:"标签"}),C("span",{className:"text-sm",children:r})]})]})]})},ge=t=>({BlogActions:ae(ie,t)}),we=oe(null,ge)(se(pe));export{Ce as A,we as U};
